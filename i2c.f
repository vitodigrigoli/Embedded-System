RPI4 804000 + CONSTANT BSC1 

BSC1 00 + CONSTANT I2C_CONTROL
BSC1 04 + CONSTANT I2C_STATUS
BSC1 08 + CONSTANT I2C_DATA_LENGTH
BSC1 0C + CONSTANT I2C_SLAVE_ADDRESS
BSC1 10 + CONSTANT I2C_DATA_FIFO
BSC1 14 + CONSTANT I2C_CLOCK_DIVIDER
BSC1 18 + CONSTANT I2C_DATA_DELAY
BSC1 1C + CONSTANT I2C_CLOCK_STRETCH_TIMEOUT

: RESET_FIFO I2C_CONTROL DUP @ 4 BIT_SET SWAP ! ;
: RESET_STATUS 
	I2C_STATUS DUP @ 1 BIT_SET SWAP ! 
	I2C_STATUS DUP @ 8 BIT_SET SWAP ! 
	I2C_STATUS DUP @ 9 BIT_SET SWAP !  ;

: SET_SLAVE 27 I2C_SLAVE_ADDRESS ! ;


: I2C_SETUP 
	2 GPIO_MODE ALT_0
	3 GPIO_MODE ALT_0
	RESET_FIFO
	RESET_STATUS
	SET_SLAVE
	;

: I2C_STORE I2C_DATA_FIFO ! ;

: I2C_SEND
	I2C_CONTROL DUP @ 0 BIT_CLEAR SWAP !
	I2C_CONTROL DUP @ 7 BIT_SET SWAP ! 
	I2C_CONTROL DUP @ F BIT_SET SWAP !  
;

: >I2C
  RESET_STATUS
  RESET_FIFO
  1 I2C_DATA_LENGTH !
  SET_SLAVE
  I2C_STORE
  I2C_SEND ;
  
  : 4BM>LCD 
  F0 AND DUP ROT
  D + OR >I2C 1000 DELAY
  8 OR >I2C 1000 DELAY ;

  : 4BL>LCD 
  F0 AND DUP
  D + OR >I2C 1000 DELAY
  8 OR >I2C 1000 DELAY ;

: >LCDL
 DUP 4 RSHIFT 4BL>LCD
 4BL>LCD ;

 : >LCDM
  OVER OVER F0 AND 4BM>LCD
  F AND 4 LSHIFT 4BM>LCD ;

  : IS_CMD 
  DUP 8 RSHIFT 1 = ;
  
  : >LCD 
  IS_CMD SWAP >LCDM 
;

: SETUP_LCD 
  102 >LCD ;

: RESET 30 >I2C 100 DELAY 30 >I2C 100 DELAY 30 >I2C 100 DELAY 20 >I2C 2 >I2C 28 >I2C 0 >I2C 8 >I2C 0 >I2C 1 >I2C 0 >I2C 7 >I2C ;
: ROW 38 >I2C 5000 DELAY ;
: DISPLAY 0F >I2C 5000 DELAY ;
: CLEAR 01 >I2C ;

: SETUP RESET ROW DISPLAY CLEAR ;
: I2C_DELAY 1000 DELAY ;
: >I2C
  RESET_STATUS
  RESET_FIFO
  1 I2C_DATA_LENGTH !
  SET_SLAVE
  I2C_STORE
  I2C_SEND 
  I2C_DELAY ;

: ATT 4D >I2C 49 >I2C 1D >I2C 19 >I2C ;
: Z1 4D >I2C 1000 DELAY  49 >I2C   1000 DELAY  3D >I2C 1000 DELAY  39 >I2C ;
: R 5D >I2C 59 >I2C 2D >I2C 29 >I2C ;
: L 4D >I2C 49 >I2C CD >I2C C9 >I2C ;
: O 4D >I2C 49 >I2C FD >I2C F9 >I2C ;


: 4BIT-CONFIG 
  3C >I2C 38 >I2C
  1000 DELAY
  3C >I2C 38 >I2C
  1000 DELAY
  3C >I2C 38 >I2C
  1000 DELAY

  2C >I2C 28 >I2C
  2C >I2C 28 >I2C
  1000 DELAY

  C >I2C 8 >I2C
  C >I2C 8 >I2C
  1000 DELAY

  8C >I2C 88 >I2C
  1000 DELAY

  C >I2C 8 >I2C
  1000 DELAY

  1C >I2C 18 >I2C

  C >I2C 8 >I2C
  4C >I2C 48 >I2C

;


: CLEAR_LCD 0C >I2C 08 >I2C 1C >I2C 18 >I2C ;
: DISPLAY_ON 0C >I2C 08 >I2C EC >I2C E8 >I2C ;
                                            